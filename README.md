### 과정

- 공모전 개요
    - `2022년 상반기 수출액`을 예측하는 `회귀 모델`을 만들었다.
    - 사용하는 피처는 `2021년까지의 데이터`라면 마음대로 선택할 수 있게 하였다.
- 피처 선정
    - `거시경제학 교과서`를 살펴보며, `국제수지에 영향을 까치는 변수`가 환율임을 확인했으며, 환율에 영향을 끼치는 변수가 국민소득/이자율/물가임을 확인했다. 또한 국제수지의 균형을 나타내는 BP곡선의 이동요인에 해외 변수가 있다는 것을 확인했으며, 예상이라는 변수 또한 확인했다. 이를 바탕으로 `한국은행 경제통계시스템에서 이와 관련된 변수를 최대한 추가`했다.
    - 피처를 모을 때는 `타겟을 고려`하여 계절성을 반영하지 않은 데이터와 원화를 기준으로 된 데이터를 수집했다. 예측해야 할 타겟에 계절성이 존재하기 때문에 피처에도 계절성이 존재해야 한다는 생각이 들었고, 타겟의 단위가 원화라고 생각하여 원화를 기준으로 수집했다.
    - 모은 변수에 lag6, lag12, 증가율 등의 변화를 주는 피처 엔지니어링을 수행하였고, `총 184개의 변수`를 사용했다.
    - 그 후 `PI`를 이용해서 시행하여 val의 성능을 낮추는 것을 과적합의 원인인 피처라고 판단했고, 계속해서 피처를 줄이며 `최종적으로 8개의 피처를 선정`했다.
    - 최종 8개의 피처는 우연인지 모르겠지만, 우리나라 환율, 각 국의 경제 변수 한가지씩, 우리나라의 경제 상황을 확인할 수 있는 변수 등 `각 테마를 대표할 수 있는 피처`들이 남게 되었다.
- 타겟 및 모델
    - 타겟은 `시계열 데이터로 추세와 계절성`을 띄고 있었다.
    - train 타겟은 1~6 범위에서 우상향하는 추세를 가지고, val로 설정한 2021년 하반기 데이터는 6 즈음에 실제 타겟 데이터가 존재했는데, 모델 예측 결과 val의 타겟 예측값을 4 즈음으로 예측하는 문제가 발생했다. 이러한 문제의 원인을 `모델이 추세를 파악하지 못했기 때문`이라고 생각했고, 타겟의 추세를 제거하기 위해 고민했다.
    - 고민 결과 `중간 타겟으로 증가율을 추가`했고, 전년도 수출액에 학습 결과인 증가율을 곱한 값을 최종 타겟 값으로 설정했다.  증가율은 추세가 존재하지 않았기 때문에 `val의 예측 점수가 많이 개선`되었다.
    - 모델은 XGBoost와 LBGM을 사용했는데, 그 중 성능이 더 좋았던 LBGM을 최종 모델로 선정하였다.

### 후기

- 아쉬운 점
    - 나중에 검색해보니 `타겟 값의 단위가 달러`였다. 가장 기본이라고도 할 수 있는 타겟 값을 살펴보는 것을 제대로 하지 않은 점이 아쉽다.
    - 시계열의 추세에 대해서는 해결했지만 `계절성에 대한 고민`을 많이 하지 못한 점이 아쉽다. 나중에 생각해 보니, 카테고리형 변수인 ‘month’를 추가하는 것이 계절성을 반영할 수 있는 방법이 아니었을까라는 생각이 든다.
    - 최종 모델에서 `val 데이터를 모델 학습에` 넣을 생각을 하지 않은 점이 아쉽다. val 데이터로는 과적합이 발생하지 않으면서 가능한 최대 점수만 확인하고 train 데이터에 포함하여 재학습을 진행했어야 한다는 아쉬움이 크게 남는다.  왜냐하면 test 데이터인 2022년을 예측하기 `가장 좋은 학습 데이터는 2021년에 데이터, 즉, val 데이터였을 것이다.`
- 만족스러운 점
    - 배운 내용인 머신 러닝을 최대한 활용할 수 있었으며, 가장 중요한 부분인 피처 엔지니어링에 대해 많은 고민을 할 수 있었던 점이 좋았다. `피처를 수집/설정/적용/수정하는 부분에서 나만의 방법`이 생긴 기분이다.
    - 시계열 데이터의 `문제를 해결하기 위해 스스로 고민해보고 해결하는 과정에서 뿌듯함`을 느꼈다. 고민하는 과정에서 진로가 조금 흔들리기도 했는데, 해결하는 과정에서는 오히려 `진로를 확신할 수 있는 계기`가 되기도 했다.
